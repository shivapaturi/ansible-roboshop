- name: configure mysql server
  hosts: mysql
  become: yes
  tasks:
    - name: Install MySQL Server
      ansible.builtin.dnf:
        name: mysql
        state: present
        
    - name: enable and start service
      ansible.builtin.service:
      state: started
      enabled: yes

    - name: Set MySQL root password
      ansible.builtin.command: mysql_secure_installation --set-root-pass RoboShop@1
      args:
          creates: /var/log/mysql-root-pass-set
      register: result